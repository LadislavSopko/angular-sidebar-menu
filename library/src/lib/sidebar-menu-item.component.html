<div
  class="asm-menu__item"
  [ngClass]="{
    'asm-menu__item--open': !!menuItem.children && isOpen,
    'asm-menu__item--active': (!!rla && rla.isActive) || isActiveChild
  }"
>
  <span *ngIf="menuItem.separator" class="asm-menu__item__separator">{{ menuItem.label }}</span>
  <a
    *ngIf="menuItem.route || menuItem.route === ''"
    [routerLink]="menuItem.route"
    routerLinkActive
    #rla="routerLinkActive"
    [routerLinkActiveOptions]="{ exact: true }"
  >
    <ng-container *ngTemplateOutlet="innerItem; context: { $implicit: menuItem }"></ng-container>
  </a>
  <a *ngIf="menuItem.url" [href]="menuItem.url" [target]="menuItem.target">
    <ng-container *ngTemplateOutlet="innerItem; context: { $implicit: menuItem }"></ng-container>
  </a>
  <ng-container *ngIf="menuItem.children">
    <a (click)="onNodeToggleClick()">
      <ng-container *ngTemplateOutlet="innerItem; context: { $implicit: menuItem }"></ng-container>
    </a>
    <ul class="asm-menu__item__node">
      <li
        *ngFor="let childItem of menuItem.children"
        [asm-sidebar-menu-item]="childItem"
        [iconClasses]="iconClasses"
        [toggleIconClasses]="toggleIconClasses"
        (isItemActive)="isChildItemActive($event)"
        [isRootNode]="false"
      ></li>
    </ul>
  </ng-container>
</div>

<ng-template #innerItem let-menuItem>
  <ng-container *ngIf="asMenuItem(menuItem) as menuItem">
    <i *ngIf="menuItem.iconClasses || iconClasses" [class]="menuItem.iconClasses || iconClasses" class="asm-menu__item__icon"></i>
    <span class="asm-menu__item__label">{{ menuItem.label }}</span>
    <span *ngIf="menuItem.badges || menuItem.children" class="asm-menu__item__pull">
      <i *ngIf="menuItem.children" [class]="toggleIconClasses" class="asm-menu__item___toggle"></i>
      <span *ngFor="let badge of menuItem.badges" [class]="badge.classes" class="asm-menu__item___badge">{{ badge.label }}</span>
    </span>
  </ng-container>
</ng-template>
